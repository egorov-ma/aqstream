<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd">

    <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->

    <changeSet id="005-1" author="aqstream" context="!test">
        <comment>Telegram —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π</comment>

        <!-- registration.confirmed -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="registration.confirmed"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[üé´ *–ë–∏–ª–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ *{{eventTitle}}*.

üìã *–î–µ—Ç–∞–ª–∏:*
‚Ä¢ –ö–æ–¥ –±–∏–ª–µ—Ç–∞: `{{confirmationCode}}`
‚Ä¢ –¢–∏–ø: {{ticketTypeName}}
‚Ä¢ –î–∞—Ç–∞: {{eventDate}}

[–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–æ–±—ã—Ç–∏–∏]({{eventUrl}})]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞\", \"eventTitle\": \"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è\", \"confirmationCode\": \"–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\", \"ticketTypeName\": \"–¢–∏–ø –±–∏–ª–µ—Ç–∞\", \"eventDate\": \"–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è\", \"eventUrl\": \"–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <!-- registration.cancelled -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="registration.cancelled"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[‚ùå *–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–í–∞—à–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ *{{eventTitle}}* ({{eventDate}}) –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞.

{{#cancelledByOrganizer}}
–ü—Ä–∏—á–∏–Ω–∞: –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –æ—Ç–º–µ–Ω–∏–ª –≤–∞—à—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.
{{/cancelledByOrganizer}}
{{^cancelledByOrganizer}}
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞ –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.
{{/cancelledByOrganizer}}
{{#cancellationReason}}

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {{cancellationReason}}
{{/cancellationReason}}]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞\", \"eventTitle\": \"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è\", \"eventDate\": \"–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è\", \"cancelledByOrganizer\": \"–û—Ç–º–µ–Ω–µ–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º\", \"cancellationReason\": \"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="notification_templates" schemaName="notification_service">
                <where>code IN ('registration.confirmed', 'registration.cancelled') AND channel = 'TELEGRAM'</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="005-2" author="aqstream" context="!test">
        <comment>Telegram —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Å–æ–±—ã—Ç–∏–π</comment>

        <!-- event.reminder -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="event.reminder"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[‚è∞ *–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å–æ–±—ã—Ç–∏–∏*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–ó–∞–≤—Ç—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç—Å—è *{{eventTitle}}*!

üìÖ –î–∞—Ç–∞: {{eventDate}}
{{#eventLocation}}
üìç –ú–µ—Å—Ç–æ: {{eventLocation}}
{{/eventLocation}}

[–ü–æ–¥—Ä–æ–±–Ω–µ–µ]({{eventUrl}})]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞\", \"eventTitle\": \"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è\", \"eventDate\": \"–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è\", \"eventLocation\": \"–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è\", \"eventUrl\": \"–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <!-- event.cancelled -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="event.cancelled"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[‚ö†Ô∏è *–°–æ–±—ã—Ç–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–æ–±—ã—Ç–∏–µ *{{eventTitle}}* ({{eventDate}}) –±—ã–ª–æ –æ—Ç–º–µ–Ω–µ–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º.

–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞\", \"eventTitle\": \"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è\", \"eventDate\": \"–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <!-- event.changed -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="event.changed"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[üìù *–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–æ–±—ã—Ç–∏–∏*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–í —Å–æ–±—ã—Ç–∏–∏ *{{eventTitle}}* –ø—Ä–æ–∏–∑–æ—à–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

üìÖ –î–∞—Ç–∞: {{eventDate}}
{{#eventLocation}}
üìç –ú–µ—Å—Ç–æ: {{eventLocation}}
{{/eventLocation}}

[–ü–æ–¥—Ä–æ–±–Ω–µ–µ]({{eventUrl}})]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞\", \"eventTitle\": \"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è\", \"eventDate\": \"–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è\", \"eventLocation\": \"–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è\", \"eventUrl\": \"–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="notification_templates" schemaName="notification_service">
                <where>code IN ('event.reminder', 'event.cancelled', 'event.changed') AND channel = 'TELEGRAM'</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="005-3" author="aqstream" context="!test">
        <comment>Telegram —à–∞–±–ª–æ–Ω—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π</comment>

        <!-- organization.request.approved -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="organization.request.approved"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[‚úÖ *–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –æ–¥–æ–±—Ä–µ–Ω–∞*

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ *{{organizationName}}* –æ–¥–æ–±—Ä–µ–Ω.

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

[–ü–µ—Ä–µ–π—Ç–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é]({{organizationUrl}})]]></column>
            <column name="variables" valueComputed="'{\"organizationName\": \"–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\", \"organizationUrl\": \"–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <!-- organization.request.rejected -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="organization.request.rejected"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[‚ùå *–ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω—ë–Ω*

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ *{{organizationName}}* –±—ã–ª –æ—Ç–∫–ª–æ–Ω—ë–Ω.

{{#rejectionReason}}
–ü—Ä–∏—á–∏–Ω–∞: {{rejectionReason}}
{{/rejectionReason}}

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—á–∞–Ω–∏–π.]]></column>
            <column name="variables" valueComputed="'{\"organizationName\": \"–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\", \"rejectionReason\": \"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="notification_templates" schemaName="notification_service">
                <where>code IN ('organization.request.approved', 'organization.request.rejected') AND channel = 'TELEGRAM'</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="005-4" author="aqstream" context="!test">
        <comment>Email —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</comment>

        <!-- auth.email-verification -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="auth.email-verification"/>
            <column name="channel" value="EMAIL"/>
            <column name="subject" value="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à email ‚Äî AqStream"/>
            <column name="body"><![CDATA[<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
    <div style="max-width: 600px; margin: 0 auto; padding: 20px;">
        <h1 style="color: #2563eb;">AqStream</h1>

        <p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!</p>

        <p>–î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–∞—à–µ–≥–æ email-–∞–¥—Ä–µ—Å–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ:</p>

        <p style="text-align: center; margin: 30px 0;">
            <a href="{{verificationUrl}}"
               style="background-color: #2563eb; color: white; padding: 12px 24px;
                      text-decoration: none; border-radius: 6px; display: inline-block;">
                –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email
            </a>
        </p>

        <p>–ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä:</p>
        <p style="word-break: break-all; color: #666;">{{verificationUrl}}</p>

        <p>–°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ 24 —á–∞—Å–∞.</p>

        <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

        <p style="color: #666; font-size: 12px;">
            –ï—Å–ª–∏ –≤—ã –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ AqStream, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ.
        </p>
    </div>
</body>
</html>]]></column>
            <column name="variables" valueComputed="'{\"verificationUrl\": \"–°—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <!-- auth.password-reset -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="auth.password-reset"/>
            <column name="channel" value="EMAIL"/>
            <column name="subject" value="–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è ‚Äî AqStream"/>
            <column name="body"><![CDATA[<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
    <div style="max-width: 600px; margin: 0 auto; padding: 20px;">
        <h1 style="color: #2563eb;">AqStream</h1>

        <p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!</p>

        <p>–í—ã –∑–∞–ø—Ä–æ—Å–∏–ª–∏ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.</p>

        <p style="text-align: center; margin: 30px 0;">
            <a href="{{resetUrl}}"
               style="background-color: #2563eb; color: white; padding: 12px 24px;
                      text-decoration: none; border-radius: 6px; display: inline-block;">
                –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å
            </a>
        </p>

        <p>–ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä:</p>
        <p style="word-break: break-all; color: #666;">{{resetUrl}}</p>

        <p>–°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ 1 —á–∞—Å.</p>

        <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

        <p style="color: #666; font-size: 12px;">
            –ï—Å–ª–∏ –≤—ã –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ.
            –í–∞—à –ø–∞—Ä–æ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
        </p>
    </div>
</body>
</html>]]></column>
            <column name="variables" valueComputed="'{\"resetUrl\": \"–°—Å—ã–ª–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="notification_templates" schemaName="notification_service">
                <where>code IN ('auth.email-verification', 'auth.password-reset') AND channel = 'EMAIL'</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="005-5" author="aqstream" context="!test">
        <comment>Telegram —à–∞–±–ª–æ–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è</comment>

        <!-- user.welcome -->
        <insert tableName="notification_templates" schemaName="notification_service">
            <column name="id" valueComputed="gen_random_uuid()"/>
            <column name="code" value="user.welcome"/>
            <column name="channel" value="TELEGRAM"/>
            <column name="body"><![CDATA[üëã *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AqStream!*

–ü—Ä–∏–≤–µ—Ç, {{firstName}}!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è
‚Ä¢ –ü–æ–ª—É—á–∞—Ç—å –±–∏–ª–µ—Ç—ã –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚Ä¢ –°–ª–µ–¥–∏—Ç—å –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üéâ]]></column>
            <column name="variables" valueComputed="'{\"firstName\": \"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\"}'::jsonb"/>
            <column name="is_system" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="notification_templates" schemaName="notification_service">
                <where>code = 'user.welcome' AND channel = 'TELEGRAM'</where>
            </delete>
        </rollback>
    </changeSet>

</databaseChangeLog>
